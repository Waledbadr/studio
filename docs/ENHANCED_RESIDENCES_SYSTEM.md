# نظام إدارة السكنات المحسن - الوثائق

## نظرة عامة
تم إعادة تصميم نظام إدارة السكنات ليشمل إدارة شاملة للخدمات على مستويات مختلفة (المجمع، المبنى، الطابق، الغرفة، والمرافق العامة) مع إمكانية إضافة تفاصيل فرعية مثل أرقام الحمامات ووحدات التخزين.

## الميزات الجديدة

### 1. إدارة الخدمات متعددة المستويات
- **خدمات على مستوى المبنى**: مثل المصاعد، المخارج الطارئة، أنظمة الحماية
- **خدمات على مستوى الطابق**: مثل الحمامات المشتركة، المطابخ المشتركة، صالات الانتظار
- **خدمات على مستوى الغرفة**: مثل الحمامات الخاصة، المطابخ الخاصة، التكييف
- **خدمات على مستوى المرافق العامة**: مثل خدمات المستودعات، المكاتب، المساجد

### 2. المرافق الفرعية (Sub-Facilities)
- إمكانية إضافة مرافق فرعية لكل خدمة
- ترقيم المرافق الفرعية (مثل حمام رقم 001، وحدة تخزين A1)
- تتبع حالة كل مرفق فرعي (نشط، غير نشط، تحت الصيانة)
- إضافة ملاحظات لكل مرفق فرعي

### 3. تصنيف الخدمات
- **أساسية (Essential)**: خدمات ضرورية مثل الحمامات، المياه، الكهرباء
- **ترفيهية (Amenity)**: خدمات إضافية مثل الصالات الرياضية، حمامات السباحة
- **مرافق عامة (Utility)**: خدمات البنية التحتية مثل غرف الكهرباء، إدارة النفايات

### 4. إدارة حالة الخدمات
- **نشط**: الخدمة تعمل بشكل طبيعي
- **غير نشط**: الخدمة متوقفة مؤقتاً
- **تحت الصيانة**: الخدمة قيد الصيانة

## كيفية الاستخدام

### إضافة خدمة جديدة

1. **اختر المستوى**: انقر على زر "Services" بجانب المبنى، الطابق، الغرفة، أو المرفق المطلوب
2. **املأ بيانات الخدمة**:
   - اسم الخدمة (مطلوب)
   - نوع الخدمة (اختر من القائمة المحددة مسبقاً)
   - فئة الخدمة (أساسية/ترفيهية/مرافق عامة)
   - حالة الخدمة (نشط/غير نشط/تحت الصيانة)
   - ملاحظات (اختياري)

### إضافة مرافق فرعية

1. **في نفس نافذة إضافة الخدمة**، ادخل تفاصيل المرفق الفرعي:
   - اسم المرفق الفرعي (مثل: كابينة، وحدة)
   - رقم/معرف المرفق (مثل: 001، A1)
   - حالة المرفق
   - ملاحظات إضافية

2. **انقر على "Add"** لإضافة المرفق الفرعي للقائمة
3. **كرر العملية** لإضافة عدة مرافق فرعية
4. **انقر على "Add Service"** لحفظ الخدمة مع جميع مرافقها الفرعية

## أمثلة عملية

### حمامات على مستوى الطابق
- **اسم الخدمة**: حمامات الطابق الثالث
- **نوع الخدمة**: Bathroom
- **فئة الخدمة**: Essential
- **المرافق الفرعية**:
  - كابينة #001 (نشط)
  - كابينة #002 (نشط) 
  - كابينة #003 (تحت الصيانة)

### خدمات المبنى
- **اسم الخدمة**: نظام المصاعد
- **نوع الخدمة**: Elevator
- **فئة الخدمة**: Essential
- **المرافق الفرعية**:
  - مصعد A (نشط)
  - مصعد B (نشط)
  - مصعد الخدمة (غير نشط)

### مرافق التخزين
- **اسم الخدمة**: مخزن الطابق
- **نوع الخدمة**: Storage
- **فئة الخدمة**: Utility
- **المرافق الفرعية**:
  - وحدة A1 (نشط)
  - وحدة A2 (نشط)
  - وحدة B1 (تحت الصيانة)

## أنواع الخدمات المتاحة

1. **Bathroom** - حمامات
2. **Kitchen** - مطابخ
3. **Laundry** - مغاسل
4. **Storage** - مخازن
5. **Elevator** - مصاعد
6. **Emergency Exit** - مخارج طوارئ
7. **Fire Safety** - الحماية من الحرائق
8. **Security** - الأمن
9. **Parking** - مواقف السيارات
10. **Garden** - حدائق
11. **Playground** - ملاعب الأطفال
12. **Swimming Pool** - حمامات السباحة
13. **Gym** - صالات رياضية
14. **Meeting Room** - قاعات الاجتماعات
15. **Reception** - الاستقبال
16. **Waste Management** - إدارة النفايات
17. **Electrical Room** - غرف الكهرباء
18. **Water Supply** - إمدادات المياه
19. **HVAC** - التكييف والتهوية
20. **Internet/Telecom** - الإنترنت والاتصالات
21. **Other** - أخرى

## مزايا النظام الجديد

### 1. المرونة
- إمكانية إضافة خدمات على أي مستوى حسب الحاجة
- تخصيص أنواع الخدمات حسب طبيعة المشروع

### 2. التتبع التفصيلي
- تتبع كل مرفق فرعي بشكل منفصل
- إدارة حالة كل مرفق (نشط/غير نشط/صيانة)
- الاحتفاظ بسجل تواريخ الإضافة والصيانة

### 3. التنظيم
- تصنيف الخدمات حسب الأهمية (أساسية/ترفيهية/مرافق عامة)
- عرض مرئي مميز للخدمات والمرافق الفرعية
- عدادات تظهر عدد الخدمات في كل مستوى

### 4. سهولة الإدارة
- واجهة مستخدم بديهية
- إمكانية إضافة عدة مرافق فرعية في عملية واحدة
- نظام تنبيهات للأخطاء والنجاح

## التكامل مع أنظمة أخرى

### نظام الصيانة
- الخدمات والمرافق الفرعية متاحة لطلبات الصيانة
- إمكانية تحديد المرفق الفرعي المحدد في طلب الصيانة
- تتبع حالة الصيانة لكل مرفق

### نظام التقارير
- تقارير مفصلة عن استخدام الخدمات
- إحصائيات حالة المرافق الفرعية
- تقارير الصيانة الدورية

## الصلاحيات

### المديرون (Admins)
- إضافة وتعديل وحذف جميع الخدمات والمرافق الفرعية
- عرض جميع المجمعات والخدمات
- إدارة حالة الخدمات

### المستخدمون العاديون
- عرض الخدمات في المجمعات المخصصة لهم فقط
- لا يمكنهم إضافة أو تعديل الخدمات

## ملاحظات تقنية

### هيكل البيانات
```typescript
interface Service {
  id: string;
  name: string;
  type: string;
  category: 'Essential' | 'Amenity' | 'Utility';
  subFacilities: SubFacility[];
  status: 'Active' | 'Inactive' | 'Maintenance';
  addedDate: Date;
  lastMaintenanceDate?: Date;
  notes?: string;
}

interface SubFacility {
  id: string;
  name: string;
  number?: string;
  status: 'Active' | 'Inactive' | 'Maintenance';
  notes?: string;
}
```

### التخزين
- البيانات مخزنة في Firebase Firestore
- دعم للعمل بدون اتصال باستخدام localStorage
- تحديث فوري للبيانات عند التغيير

### الأداء
- تحميل البيانات بشكل تدريجي (lazy loading)
- تحسين عرض الخدمات والمرافق الفرعية
- استخدام ذاكرة التخزين المؤقت للتحميل السريع

## الدعم والمساعدة

لأي استفسارات أو مشاكل في استخدام النظام الجديد، يرجى التواصل مع فريق الدعم التقني.
