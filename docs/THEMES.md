# نظام الثيمات والألوان الشخصية - EstateCare

## نظرة عامة

تم تطوير نظام ثيمات شامل يسمح لكل مستخدم باختيار الألوان والوضع المفضل لديه. النظام يدعم:

- **7 مجموعات ألوان مختلفة**: الأزرق الكلاسيكي، الأخضر الزمردي، البنفسجي الملكي، البرتقالي الدافئ، الوردي الأنيق، التيل المهدئ، النيلي العميق
- **3 أوضاع عرض**: فاتح، داكن، حسب النظام
- **حفظ شخصي**: كل مستخدم له إعدادات منفصلة
- **تطبيق فوري**: تغيير الثيم بدون إعادة تحميل الصفحة

## الملفات الرئيسية

### 1. نظام الألوان
```
src/lib/themes.ts
```
- يحتوي على تعريف جميع مجموعات الألوان
- دوال لتطبيق الثيمات على DOM
- 7 ثيمات مختلفة بألوان للوضعين الفاتح والداكن

### 2. موفر الثيم
```
src/components/theme-provider.tsx
```
- إدارة حالة الثيم الحالي
- مراقبة تغييرات النظام للوضع التلقائي
- تطبيق الألوان فوراً عند التغيير

### 3. مكون اختيار الثيم
```
src/components/theme-selector.tsx
```
- واجهة اختيار الألوان والأوضاع
- معاينة فورية للألوان
- حفظ الإعدادات في حساب المستخدم

### 4. التكامل مع المستخدمين
```
src/context/users-context.tsx
```
- إضافة حقل themeSettings لكل مستخدم
- تحميل إعدادات المستخدم عند تبديل الحسابات
- حفظ تلقائي للإعدادات

## كيفية الاستخدام

### 1. الوصول لإعدادات الثيم

#### الطريقة الأولى: من القائمة العلوية
1. اضغط على أيقونة الشمس/القمر في الشريط العلوي
2. اختر الوضع المطلوب (فاتح/داكن/حسب النظام)
3. اضغط على "إعدادات الألوان" للوصول للثيمات

#### الطريقة الثانية: من صفحة الإعدادات
1. انتقل إلى صفحة "Setup"
2. اختر تبويب "Theme Settings"
3. صفحة كاملة لاختيار الألوان والأوضاع

### 2. اختيار مجموعة الألوان
- 7 خيارات متاحة مع معاينة فورية
- كل ثيم له وصف ومعاينة للوضعين الفاتح والداكن
- النقر على الثيم يطبقه فوراً

### 3. اختيار الوضع
- **فاتح**: ألوان مشرقة مناسبة للنهار
- **داكن**: ألوان داكنة مريحة للعين
- **حسب النظام**: يتبع إعدادات نظام التشغيل

## المميزات التقنية

### 1. منع الوميض
- سكريبت في `layout.tsx` يطبق الثيم قبل عرض المحتوى
- يمنع الوميض عند تحديث الصفحة

### 2. الحفظ التلقائي
- إعدادات المستخدم تُحفظ في Firestore
- نسخة احتياطية في localStorage
- تحميل تلقائي عند تبديل المستخدمين

### 3. الاستجابة للنظام
- مراقبة تغييرات وضع النظام
- تطبيق تلقائي عند اختيار "حسب النظام"

## الثيمات المتاحة

### 1. الأزرق الكلاسيكي (blue)
- الثيم الافتراضي
- ألوان هادئة ومريحة للعين

### 2. الأخضر الزمردي (emerald)
- ثيم طبيعي يبعث على الراحة

### 3. البنفسجي الملكي (purple)
- ثيم أنيق يضفي لمسة من الفخامة

### 4. البرتقالي الدافئ (orange)
- ثيم حيوي ينشط ويحفز الإبداع

### 5. الوردي الأنيق (rose)
- ثيم رقيق يضفي لمسة أنثوية راقية

### 6. التيل المهدئ (teal)
- ثيم مريح يجمع بين الأزرق والأخضر

### 7. النيلي العميق (indigo)
- ثيم عميق يبعث على التركيز والهدوء

## التطوير المستقبلي

### مميزات مقترحة
1. **ثيمات مخصصة**: السماح بإنشاء ألوان شخصية
2. **جدولة الثيمات**: تطبيق ثيمات مختلفة حسب الوقت
3. **ثيمات الأقسام**: ألوان مختلفة لكل قسم في التطبيق
4. **مشاركة الثيمات**: إمكانية مشاركة الإعدادات بين المستخدمين

### ملاحظات التطوير
- جميع الألوان تستخدم HSL لسهولة التعديل
- النظام متوافق مع Tailwind CSS
- يدعم الـ CSS variables لتطبيق فوري
- قابل للتوسيع بسهولة لإضافة ثيمات جديدة

## استكشاف الأخطاء

### مشكلة: الثيم لا يتغير
1. تأكد من تسجيل الدخول كمستخدم
2. تحقق من console للأخطاء
3. امسح localStorage وأعد المحاولة

### مشكلة: الوميض عند التحديث
1. تأكد من وجود السكريبت في layout.tsx
2. تحقق من localStorage للثيم المحفوظ

### مشكلة: الإعدادات لا تُحفظ
1. تأكد من عمل Firestore
2. تحقق من صحة بيانات المستخدم
3. راجع console للأخطاء في الحفظ

## الدعم

للدعم التقني أو المساعدة في التخصيص، يرجى مراجعة الكود المصدري أو التواصل مع فريق التطوير.
